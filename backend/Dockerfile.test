# Используем официальный образ Go
FROM golang:1.22-alpine

# Устанавливаем необходимые пакеты
RUN apk add --no-cache git

# Создаем рабочую директорию
WORKDIR /app

# Копируем файлы зависимостей
COPY go.mod go.sum ./

# Скачиваем зависимости
RUN go mod download

# Копируем исходный код
COPY . .

# Создаем тестовую базу данных при запуске контейнера
CMD ["go", "test", "./tests/...", "-v"] 